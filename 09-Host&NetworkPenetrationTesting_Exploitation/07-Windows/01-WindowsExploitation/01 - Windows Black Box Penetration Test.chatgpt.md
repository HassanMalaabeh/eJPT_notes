# What the video covers (Introduction / big picture)

Transcript not provided; the following is a conservative, lab-focused summary inferred from the filename “01 - Windows Black Box Penetration Test.mp4” in the “01-WindowsExploitation” folder.

The session likely introduces a practical, end-to-end methodology for a black-box Windows assessment in a controlled lab: from initial scoping and host discovery, to network/service enumeration (SMB/RDP/WinRM/HTTP/FTP/SNMP), identifying low-hanging misconfigurations, and performing post-access Windows enumeration. Exploitation specifics are typically demonstrated in such modules, but below we limit to authorized, lab-safe enumeration and system-inspection commands only.

Use these notes only on systems you own or have explicit written permission to test.


# Flow (ordered)

1. Confirm scope and ROE (targets, time windows, allowed techniques).
2. Baseline reconnaissance
   - Passive: resolve hostnames, gather DNS/netblocks if any are known.
   - Active discovery: host discovery within the permitted range.
3. Port scanning
   - Quick top-ports; then thorough full-range scan with service/OS detection.
4. Service enumeration
   - SMB (139/445), RDP (3389), WinRM (5985/5986), HTTP(S), FTP (21), SNMP (161/udp), others found.
5. Triaging findings
   - Public/guest shares, anonymous FTP, default web content, exposed management services.
6. Evidence and loot review
   - Collect benign artifacts (public files/configs) for hints/creds within scope.
7. Initial access (high level)
   - In a lab, leverage permitted credentials/misconfigurations. Exploitation steps omitted here.
8. Post-access Windows enumeration (local)
   - Identity, OS build/patches, network, users/groups, autoruns/services, installed software.
9. Privilege escalation assessment (high level)
   - Enumerate potential misconfigurations; do not execute exploits without authorization.
10. Reporting and cleanup
    - Preserve outputs, note impact/likelihood, produce reproducible steps and recommendations.


# Tools highlighted

- Network/Service discovery
  - nmap (with NSE scripts), ping, arp, nslookup/dig
- SMB enumeration
  - nmap smb-* scripts, smbclient, rpcclient
- Web enumeration
  - whatweb, curl, gobuster or ffuf, nikto (light HTTP checks)
- Other common services
  - ftp (ftp/anonymity check), snmpwalk (if SNMP exposed)
- Windows post-access (built-ins)
  - whoami, systeminfo, ipconfig, net, wmic, schtasks, reg, PowerShell cmdlets

Note: Use only in authorized lab environments. Exploit frameworks and offensive modules are intentionally omitted.


# Typical command walkthrough (detailed, copy-paste friendly)

Lab-only examples. Replace values to match your authorized environment.

Setup workspace and target
```bash
# Define a workspace and target
mkdir -p ~/pt/ws/windows-blackbox && cd ~/pt/ws/windows-blackbox
export TARGET=10.10.10.10
export NET=10.10.10.0/24   # if a whole subnet is in-scope

# Optional: resolve a known hostname
# nslookup target.lab.local
```

Host discovery (only within scope)
```bash
# ICMP ping sweep (may miss hosts that drop ICMP)
nmap -sn -oA scans/01_discover_icmp $NET

# ARP sweep (on local/L2 only)
sudo nmap -sn -PR -oA scans/02_discover_arp $NET
```

Fast top-ports then full scan
```bash
# Quick top 1000 ports
nmap -Pn -T4 -sS -sV -O --version-light -oA scans/03_quick $TARGET

# Thorough full TCP range with service + default scripts
nmap -Pn -T4 -sS -sC -sV -O -p- --min-rate 3000 -oA scans/04_full $TARGET
```

Service-focused enumeration (run selectively based on open ports)

SMB (139/445)
```bash
# SMB discovery via NSE
nmap -Pn -p 139,445 --script smb-os-discovery,smb2-time,smb2-security-mode -oA scans/smb_discovery $TARGET

# Enumerate shares (no credentials)
nmap -Pn -p 139,445 --script smb-enum-shares,smb-enum-users -oA scans/smb_enum $TARGET

# List shares with null session (if allowed by target)
smbclient -L "//$TARGET/" -N

# If a share appears public/guest, try read-only listing and download
# (Avoid writing/uploading unless explicitly allowed.)
smbclient "//$TARGET/public" -N -c 'recurse ON; prompt OFF; ls; mget *'
```

RPC (if SMB accessible)
```bash
# Null session RPC checks (may or may not be permitted by the host)
rpcclient -U "" -N $TARGET -c 'srvinfo'
# Additional queries can include (use sparingly and only if allowed):
# rpcclient -U "" -N $TARGET -c 'enumdomusers'
# rpcclient -U "" -N $TARGET -c 'querydominfo'
```

RDP (3389)
```bash
# Check RDP and gather basic info
nmap -Pn -p 3389 --script rdp-ntlm-info,rdp-enum-encryption -oA scans/rdp $TARGET
```

WinRM (5985/5986)
```bash
# Detect WinRM, note auth requirements
nmap -Pn -p 5985,5986 -sV -oA scans/winrm $TARGET
```

HTTP/HTTPS
```bash
# Fingerprint web stack
whatweb http://$TARGET/ | tee scans/http_whatweb.txt

# Headers + server info
curl -I http://$TARGET/ | tee scans/http_headers.txt

# Light directory/content enumeration (adjust wordlist and extensions)
gobuster dir -u http://$TARGET/ -w /usr/share/wordlists/dirb/common.txt -t 50 -x aspx,asp,txt,config,bak -o scans/http_gobuster.txt

# Basic vulnerability hints (non-intrusive checks)
nikto -host http://$TARGET -o scans/http_nikto.txt
```

FTP (21)
```bash
# Check for anonymous access and banner
nmap -Pn -p21 --script ftp-anon,ftp-syst -oA scans/ftp $TARGET

# If anonymous allowed:
# ftp $TARGET
# Name: anonymous
# Password: anonymous@example.com
```

SNMP (161/udp)
```bash
# UDP SNMP probe
sudo nmap -sU -Pn -p161 -sV -oA scans/snmp $TARGET

# If community 'public' is enabled (common in misconfig labs):
snmpwalk -v2c -c public $TARGET 1.3.6.1.2.1.1
```

Post-access Windows enumeration (after you have authorized interactive access)
```cmd
:: Identity and privileges
whoami
whoami /all

:: System details
systeminfo
wmic os get Caption,Version,BuildNumber
wmic qfe get HotFixID,InstalledOn,Description

:: Network
ipconfig /all
route print
arp -a
netstat -ano

:: Users and groups
net user
net localgroup
net localgroup administrators

:: Services and autoruns
wmic service get name,displayname,startmode,state
schtasks /query /fo LIST /v

:: Installed software snapshot (may be large)
wmic product get Name,Version

:: Interesting directories
dir C:\Users
dir "C:\Program Files"
dir "C:\Program Files (x86)"

:: Common persistence/auto-run keys (read-only checks)
reg query HKLM\Software\Microsoft\Windows\CurrentVersion\Run
reg query HKCU\Software\Microsoft\Windows\CurrentVersion\Run

:: Priv-esc signals (enumeration only)
whoami /priv
reg query HKLM\Software\Policies\Microsoft\Windows\Installer /v AlwaysInstallElevated
wmic service get name,pathname,startmode | findstr /i "Auto" | findstr /i /v "C:\Windows\\"
```

Evidence handling
```bash
# Keep outputs organized
mkdir -p scans loot notes
# Example: move interesting files from public shares
# mv downloaded_files/* loot/
```


# Practical tips

- Always stay within scope and ROE; many of these steps are intrusive outside a lab.
- Start broad, then get targeted: quick scans to map services, then deep dives per port.
- Save everything with -oA or tee; reproducibility matters for reporting.
- Prioritize Windows-common services: 445 (SMB), 3389 (RDP), 5985/5986 (WinRM), 80/443 (HTTP/S).
- For SMB, prefer read-only enumeration; avoid uploads/modifications unless permitted.
- Treat each service as a pivot to information: web pages with creds, public SMB shares with configs, FTP banners, SNMP system info.
- Post-access, baseline the host first (whoami, systeminfo) before deeper checks.
- Privilege escalation requires caution; enumerate thoroughly before attempting any change.
- Be mindful of noisy scans; throttle when needed and coordinate timing if testing shared labs.


# Minimal cheat sheet (one-screen flow)

Lab/authorized environments only.

```bash
# Setup
mkdir -p ~/pt/ws/windows-blackbox && cd ~/pt/ws/windows-blackbox
export TARGET=10.10.10.10

# Discovery and scans
nmap -sn 10.10.10.0/24 -oA scans/01_discover
nmap -Pn -T4 -sS -sV -O -oA scans/02_quick $TARGET
nmap -Pn -T4 -sS -sC -sV -O -p- --min-rate 3000 -oA scans/03_full $TARGET

# SMB
nmap -Pn -p 139,445 --script smb-os-discovery,smb-enum-shares -oA scans/smb $TARGET
smbclient -L "//$TARGET/" -N
# smbclient "//$TARGET/public" -N -c 'recurse ON; prompt OFF; mget *'

# RDP / WinRM
nmap -Pn -p 3389 --script rdp-ntlm-info -oA scans/rdp $TARGET
nmap -Pn -p 5985,5986 -sV -oA scans/winrm $TARGET

# HTTP
whatweb http://$TARGET/ | tee scans/http_whatweb.txt
curl -I http://$TARGET/ | tee scans/http_headers.txt
gobuster dir -u http://$TARGET/ -w /usr/share/wordlists/dirb/common.txt -t 50 -x aspx,asp,txt,config,bak -o scans/http_gobuster.txt

# FTP / SNMP (if present)
nmap -Pn -p21 --script ftp-anon,ftp-syst -oA scans/ftp $TARGET
sudo nmap -sU -Pn -p161 -sV -oA scans/snmp $TARGET
# snmpwalk -v2c -c public $TARGET 1.3.6.1.2.1.1

# Post-access Windows (after authorized access)
# whoami /all && systeminfo && ipconfig /all && net user && net localgroup administrators
```

# Summary

Without a transcript, this summary outlines a conservative, lab-oriented black-box Windows testing workflow likely demonstrated in the video: scope confirmation, host discovery, comprehensive scanning, targeted service enumeration for SMB/RDP/WinRM/HTTP/FTP/SNMP, and structured post-access Windows enumeration. Commands focus on safe information gathering and system inspection within authorized environments. For a complete practical run, integrate these steps with your lab’s ROE, document all findings, and avoid exploitation actions unless explicitly permitted and supervised.